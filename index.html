<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Essential Life Skills Guide</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #2c3e50 0%, #3498db 100%);
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            background: white;
            border-radius: 16px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.3);
            overflow: hidden;
        }

        .header {
            background: linear-gradient(135deg, #2c3e50 0%, #3498db 100%);
            color: white;
            padding: 40px 30px;
            text-align: center;
            position: relative;
        }

        .header h1 {
            font-size: 32px;
            margin-bottom: 10px;
            display: inline-block;
        }

        .header p {
            opacity: 0.9;
            font-size: 16px;
        }

        .header .editable {
            background: rgba(255,255,255,0.1);
        }

        .header .editable:hover {
            background: rgba(255,255,255,0.2);
        }

        .header .editable:focus {
            outline: 2px solid white;
            background: rgba(255,255,255,0.15);
        }

        .header-emoji {
            margin-right: 8px;
        }
.sync-status {
    position: absolute;
    top: 20px;
    left: 30px;
    font-size: 12px;
    padding: 6px 12px;
    border-radius: 20px;
    background: rgba(255,255,255,0.2);
}

.sync-status.synced {
    background: rgba(46, 204, 113, 0.3);
}

.sync-status.syncing {
    background: rgba(241, 196, 15, 0.3);
}

        .edit-toggle {
            position: absolute;
            top: 20px;
            right: 30px;
        }

        .edit-btn {
            background: rgba(255,255,255,0.2);
            color: white;
            border: 2px solid white;
            padding: 8px 16px;
            border-radius: 6px;
            cursor: pointer;
            font-size: 14px;
            font-weight: 600;
            transition: all 0.3s ease;
        }

        .edit-btn:hover {
            background: white;
            color: #3498db;
        }

        .edit-btn.active {
            background: #27ae60;
            border-color: #27ae60;
        }

        .nav-tabs {
            display: flex;
            background: #f8f9fa;
            border-bottom: 2px solid #dee2e6;
            overflow-x: auto;
            flex-wrap: wrap;
        }

        .tab-wrapper {
            display: flex;
            align-items: center;
            gap: 5px;
        }

        .nav-tab {
            padding: 15px 25px;
            cursor: pointer;
            border: none;
            background: none;
            font-size: 15px;
            font-weight: 500;
            color: #6c757d;
            transition: all 0.3s ease;
            white-space: nowrap;
            border-bottom: 3px solid transparent;
        }

        .nav-tab:hover {
            background: #e9ecef;
            color: #495057;
        }

        .nav-tab.active {
            color: #3498db;
            border-bottom-color: #3498db;
            background: white;
        }

        .delete-tab-btn {
            background: #e74c3c;
            color: white;
            border: none;
            border-radius: 4px;
            padding: 4px 8px;
            cursor: pointer;
            font-size: 16px;
            font-weight: bold;
            transition: all 0.3s ease;
            margin-right: 10px;
        }

        .delete-tab-btn:hover {
            background: #c0392b;
        }

        .add-category-tab {
            background: #27ae60 !important;
            color: white !important;
            font-weight: bold;
        }

        .add-category-tab:hover {
            background: #229954 !important;
        }

        .content-area {
            padding: 30px;
        }

        .category {
            display: none;
        }

        .category.active {
            display: block;
        }

        .skill-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin-top: 20px;
        }

        .skill-card {
            background: #f8f9fa;
            border-radius: 12px;
            padding: 20px;
            border-left: 4px solid #3498db;
            transition: all 0.3s ease;
        }

        .skill-card:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(0,0,0,0.1);
        }

        .skill-title {
            font-size: 18px;
            font-weight: 600;
            color: #2c3e50;
            margin-bottom: 12px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .skill-icon {
            font-size: 24px;
        }

        .category-intro {
            background: #e3f2fd;
            padding: 20px;
            border-radius: 8px;
            margin-bottom: 25px;
            border-left: 4px solid #2196f3;
        }

        .category-intro h2 {
            color: #1976d2;
            margin-bottom: 10px;
            font-size: 20px;
        }

        .category-intro p {
            color: #424242;
            line-height: 1.6;
        }

        .checklist-item {
            display: flex;
            align-items: flex-start;
            gap: 12px;
            padding: 12px;
            background: white;
            margin-bottom: 10px;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .checklist-item:hover {
            background: #f0f7ff;
        }

        .checkbox {
            width: 20px;
            height: 20px;
            border: 2px solid #3498db;
            border-radius: 4px;
            flex-shrink: 0;
            margin-top: 2px;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .checklist-item.checked .checkbox {
            background: #27ae60;
            border-color: #27ae60;
            position: relative;
        }

        .checklist-item.checked .checkbox:after {
            content: "✓";
            color: white;
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            font-size: 14px;
            font-weight: bold;
        }

        .checklist-item.checked {
            opacity: 0.7;
        }

        .checklist-text {
            flex: 1;
            font-size: 14px;
            line-height: 1.5;
            color: #495057;
        }

        .editable {
            cursor: text;
            padding: 4px;
            border-radius: 4px;
            transition: all 0.2s ease;
        }

        .editable:hover {
            background: rgba(52, 152, 219, 0.1);
        }

        .editable:focus {
            outline: 2px solid #3498db;
            background: white;
        }

        .add-item-btn, .delete-item-btn {
            padding: 6px 12px;
            border: none;
            border-radius: 6px;
            cursor: pointer;
            font-size: 12px;
            font-weight: 600;
            transition: all 0.3s ease;
            margin-top: 10px;
        }

        .add-item-btn {
            background: #27ae60;
            color: white;
            width: 100%;
        }

        .add-item-btn:hover {
            background: #229954;
        }

        .add-skill-btn {
            background: #3498db;
            color: white;
            padding: 12px 20px;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-size: 14px;
            font-weight: 600;
            width: 100%;
            margin-top: 20px;
            transition: all 0.3s ease;
        }

        .add-skill-btn:hover {
            background: #2980b9;
        }

        .delete-skill-btn {
            background: #e74c3c;
            color: white;
            padding: 4px 10px;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            font-size: 12px;
            font-weight: 600;
            margin-left: 10px;
            transition: all 0.3s ease;
        }

        .delete-skill-btn:hover {
            background: #c0392b;
        }

        .skill-card-header {
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin-bottom: 12px;
        }

        .delete-item-btn {
            background: #e74c3c;
            color: white;
            padding: 2px 8px;
            margin-left: 8px;
            font-size: 14px;
            font-weight: bold;
            min-width: 24px;
        }

        .delete-item-btn:hover {
            background: #c0392b;
        }

        .edit-mode .delete-item-btn {
            display: inline-block;
        }

        .delete-item-btn {
            display: none;
        }

        .emoji-picker {
            position: fixed;
            background: white;
            border: 2px solid #3498db;
            border-radius: 12px;
            padding: 15px;
            box-shadow: 0 8px 32px rgba(0,0,0,0.3);
            z-index: 1000;
            max-width: 320px;
            max-height: 400px;
            overflow-y: auto;
        }

        .emoji-picker-header {
            font-weight: 600;
            margin-bottom: 10px;
            color: #2c3e50;
            border-bottom: 2px solid #ecf0f1;
            padding-bottom: 8px;
        }

        .emoji-grid {
            display: grid;
            grid-template-columns: repeat(8, 1fr);
            gap: 8px;
        }

        .emoji-option {
            font-size: 24px;
            padding: 8px;
            cursor: pointer;
            border-radius: 6px;
            transition: all 0.2s ease;
            text-align: center;
        }

        .emoji-option:hover {
            background: #e3f2fd;
            transform: scale(1.2);
        }

        .emoji-clickable {
            cursor: pointer;
            padding: 2px 4px;
            border-radius: 4px;
            transition: background 0.2s ease;
        }

        .emoji-clickable:hover {
            background: rgba(52, 152, 219, 0.2);
        }

        @media (max-width: 768px) {
            .skill-grid {
                grid-template-columns: 1fr;
            }
            
            .nav-tabs {
                flex-wrap: wrap;
            }

            .emoji-picker {
                max-width: 90vw;
            }

            .emoji-grid {
                grid-template-columns: repeat(6, 1fr);
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
<div class="sync-status" id="syncStatus">Connecting...</div>
            <div class="edit-toggle">
                <button class="edit-btn" id="editModeBtn" onclick="toggleEditMode()">
                    Edit
                </button>
            </div>
            <h1>📚 Essential Life Skills Guide</h1>
            <p>Fundamental knowledge everyone should have to navigate life successfully</p>
        </div>

        <div class="nav-tabs" id="navTabs"></div>

        <div class="content-area" id="contentArea"></div>
    </div>

    <script>
        let categories = [
            {
                name: "Health & Body",
                icon: "💪",
                intro: "Understanding your body and maintaining your health is the foundation of everything else in life.",
                skills: [
                    {
                        title: "Basic Hygiene",
                        icon: "🧼",
                        items: [
                            "Brush teeth twice daily (morning and night)",
                            "Shower or bathe regularly",
                            "Wash hands before eating and after using toilet",
                            "Trim nails regularly",
                            "Wear clean clothes daily",
                            "Use deodorant"
                        ]
                    },
                    {
                        title: "Nutrition Basics",
                        icon: "🥗",
                        items: [
                            "Drink 6-8 glasses of water daily",
                            "Eat fruits and vegetables every day",
                            "Balance meals with protein, carbs, and healthy fats",
                            "Limit sugar and processed foods",
                            "Don't skip breakfast",
                            "Listen to hunger and fullness cues"
                        ]
                    },
                    {
                        title: "Sleep & Rest",
                        icon: "😴",
                        items: [
                            "Get 7-9 hours of sleep per night",
                            "Keep a consistent sleep schedule",
                            "Avoid screens 1 hour before bed",
                            "Create a dark, quiet sleeping environment",
                            "Take breaks when tired during the day"
                        ]
                    },
                    {
                        title: "Medical Awareness",
                        icon: "🏥",
                        items: [
                            "Know when to see a doctor vs. when to rest at home",
                            "Understand basic symptoms (fever, pain, bleeding)",
                            "Keep emergency numbers saved",
                            "Know your blood type and allergies",
                            "Get regular check-ups",
                            "Keep basic first aid supplies"
                        ]
                    }
                ]
            },
            {
                name: "Safety & Security",
                icon: "🛡️",
                intro: "Protecting yourself and avoiding harm is essential for survival and peace of mind.",
                skills: [
                    {
                        title: "Home Safety",
                        icon: "🏠",
                        items: [
                            "Lock doors and windows when leaving",
                            "Know how to use fire extinguisher",
                            "Have working smoke detectors",
                            "Know where gas/water shutoffs are",
                            "Don't overload electrical outlets",
                            "Keep emergency contact list visible"
                        ]
                    },
                    {
                        title: "Street Awareness",
                        icon: "🚶",
                        items: [
                            "Look both ways before crossing streets",
                            "Stay aware of surroundings (not just on phone)",
                            "Avoid dark, isolated areas at night",
                            "Trust your instincts if something feels wrong",
                            "Know basic self-defense principles",
                            "Keep valuables hidden in public"
                        ]
                    },
                    {
                        title: "Digital Security",
                        icon: "🔐",
                        items: [
                            "Use strong, unique passwords",
                            "Enable two-factor authentication",
                            "Don't share personal info with strangers online",
                            "Be skeptical of emails asking for money or information",
                            "Keep devices updated and protected",
                            "Back up important data regularly"
                        ]
                    },
                    {
                        title: "Financial Security",
                        icon: "💳",
                        items: [
                            "Check bank statements regularly",
                            "Never give card details over unsolicited calls",
                            "Shred documents with personal information",
                            "Monitor credit report annually",
                            "Use secure websites for online shopping (https)",
                            "Report lost cards immediately"
                        ]
                    }
                ]
            },
            {
                name: "Daily Living",
                icon: "🏡",
                intro: "Practical skills to manage your home, time, and everyday responsibilities.",
                skills: [
                    {
                        title: "Household Basics",
                        icon: "🧹",
                        items: [
                            "Do laundry (separate colors, read labels)",
                            "Clean bathroom and kitchen weekly",
                            "Take out trash regularly",
                            "Vacuum and sweep floors",
                            "Wash dishes after use",
                            "Make your bed daily"
                        ]
                    },
                    {
                        title: "Cooking Fundamentals",
                        icon: "👨‍🍳",
                        items: [
                            "Boil water, cook rice/pasta",
                            "Fry an egg, make a sandwich",
                            "Follow a simple recipe",
                            "Use kitchen knife safely",
                            "Know when food has gone bad",
                            "Store food properly (fridge vs. pantry)"
                        ]
                    },
                    {
                        title: "Time Management",
                        icon: "⏰",
                        items: [
                            "Use a calendar or planner",
                            "Set alarms for important events",
                            "Prioritize tasks (urgent vs. important)",
                            "Arrive on time to appointments",
                            "Break large tasks into smaller steps",
                            "Learn to say 'no' to overcommitment"
                        ]
                    },
                    {
                        title: "Basic Maintenance",
                        icon: "🔧",
                        items: [
                            "Change light bulbs",
                            "Reset circuit breakers",
                            "Plunge a toilet",
                            "Know when to call a professional",
                            "Keep tools for minor fixes",
                            "Maintain appliances per instructions"
                        ]
                    }
                ]
            },
            {
                name: "Money Management",
                icon: "💰",
                intro: "Understanding money is crucial for independence and reducing stress throughout life.",
                skills: [
                    {
                        title: "Budgeting Basics",
                        icon: "📊",
                        items: [
                            "Track income and expenses",
                            "Spend less than you earn",
                            "Set aside money for savings first",
                            "Distinguish wants from needs",
                            "Plan for irregular expenses (gifts, repairs)",
                            "Review spending monthly"
                        ]
                    },
                    {
                        title: "Banking Essentials",
                        icon: "🏦",
                        items: [
                            "Open and maintain a bank account",
                            "Use ATMs safely",
                            "Understand account fees",
                            "Set up direct deposit if possible",
                            "Keep some emergency cash at home",
                            "Know your account balance"
                        ]
                    },
                    {
                        title: "Debt Awareness",
                        icon: "💳",
                        items: [
                            "Understand interest rates",
                            "Pay credit cards in full if possible",
                            "Avoid payday loans",
                            "Only borrow what you can repay",
                            "Know the difference between good and bad debt",
                            "Check credit score periodically"
                        ]
                    },
                    {
                        title: "Smart Spending",
                        icon: "🛒",
                        items: [
                            "Compare prices before buying",
                            "Wait 24 hours before big purchases",
                            "Use shopping lists to avoid impulse buys",
                            "Buy quality over quantity for important items",
                            "Take advantage of sales and discounts wisely",
                            "Avoid lifestyle inflation"
                        ]
                    }
                ]
            },
            {
                name: "Social Skills",
                icon: "🤝",
                intro: "Connecting with others and navigating relationships is essential for happiness and success.",
                skills: [
                    {
                        title: "Communication",
                        icon: "💬",
                        items: [
                            "Make eye contact when speaking",
                            "Listen actively without interrupting",
                            "Speak clearly and at appropriate volume",
                            "Ask questions to show interest",
                            "Express yourself honestly but kindly",
                            "Admit when you don't know something"
                        ]
                    },
                    {
                        title: "Basic Etiquette",
                        icon: "🎩",
                        items: [
                            "Say 'please', 'thank you', and 'excuse me'",
                            "Respect personal space",
                            "Don't talk with mouth full",
                            "Silence phone in quiet spaces",
                            "Hold doors for others",
                            "Respond to invitations (RSVP)"
                        ]
                    },
                    {
                        title: "Conflict Resolution",
                        icon: "⚖️",
                        items: [
                            "Stay calm during disagreements",
                            "Use 'I feel' statements instead of blame",
                            "Listen to the other person's perspective",
                            "Apologize when you're wrong",
                            "Know when to walk away and cool down",
                            "Seek compromise when possible"
                        ]
                    },
                    {
                        title: "Boundaries",
                        icon: "🚧",
                        items: [
                            "It's okay to say 'no'",
                            "Respect others' 'no' immediately",
                            "Don't share everything with everyone",
                            "Recognize toxic relationships",
                            "Ask permission before borrowing",
                            "Give people space when they need it"
                        ]
                    }
                ]
            },
            {
                name: "Emotional Wellness",
                icon: "🧠",
                intro: "Managing your emotions and mental health is just as important as physical health.",
                skills: [
                    {
                        title: "Recognizing Emotions",
                        icon: "😌",
                        items: [
                            "Name what you're feeling (sad, angry, anxious, happy)",
                            "Notice physical signs (tight chest, butterflies, tension)",
                            "Understand that all emotions are valid",
                            "Distinguish between feeling and fact",
                            "Recognize emotional patterns and triggers"
                        ]
                    },
                    {
                        title: "Healthy Coping",
                        icon: "🌱",
                        items: [
                            "Take deep breaths when overwhelmed",
                            "Exercise or walk to clear your mind",
                            "Talk to trusted friends or family",
                            "Write in a journal",
                            "Take breaks when stressed",
                            "Know when to seek professional help"
                        ]
                    },
                    {
                        title: "Self-Care",
                        icon: "💆",
                        items: [
                            "Do at least one thing you enjoy daily",
                            "Set boundaries with work and commitments",
                            "Disconnect from technology regularly",
                            "Practice gratitude",
                            "Forgive yourself for mistakes",
                            "Celebrate small wins"
                        ]
                    },
                    {
                        title: "Mental Health Awareness",
                        icon: "🩺",
                        items: [
                            "Know that seeking therapy is a sign of strength",
                            "Recognize signs of depression and anxiety",
                            "Reach out when feeling persistently down",
                            "Don't self-medicate with alcohol or drugs",
                            "Build a support network",
                            "Know crisis hotline numbers"
                        ]
                    }
                ]
            },
            {
                name: "Civic Responsibility",
                icon: "🏛️",
                intro: "Being a responsible member of society helps create a better world for everyone.",
                skills: [
                    {
                        title: "Legal Basics",
                        icon: "⚖️",
                        items: [
                            "Understand basic laws (traffic, property, contracts)",
                            "Know your rights when interacting with police",
                            "Keep important documents organized",
                            "Understand employment rights",
                            "Know how to report crimes",
                            "Respect others' property and privacy"
                        ]
                    },
                    {
                        title: "Community Participation",
                        icon: "🌍",
                        items: [
                            "Vote in elections when eligible",
                            "Stay informed about local issues",
                            "Volunteer when possible",
                            "Support local businesses",
                            "Attend community meetings",
                            "Help neighbors when you can"
                        ]
                    },
                    {
                        title: "Environmental Responsibility",
                        icon: "♻️",
                        items: [
                            "Recycle when facilities available",
                            "Reduce waste (use reusable bags, bottles)",
                            "Conserve water and electricity",
                            "Don't litter",
                            "Properly dispose of hazardous materials",
                            "Consider environmental impact of choices"
                        ]
                    },
                    {
                        title: "Digital Citizenship",
                        icon: "💻",
                        items: [
                            "Think before posting online",
                            "Don't spread misinformation",
                            "Be kind in online interactions",
                            "Respect others' privacy",
                            "Give credit to original creators",
                            "Report cyberbullying or abuse"
                        ]
                    }
                ]
            },
            {
                name: "Critical Thinking",
                icon: "🧩",
                intro: "Developing your ability to think clearly and make good decisions serves you in every area of life.",
                skills: [
                    {
                        title: "Decision Making",
                        icon: "🤔",
                        items: [
                            "List pros and cons for important choices",
                            "Consider long-term consequences",
                            "Seek advice from knowledgeable people",
                            "Trust your gut for personal decisions",
                            "Learn from past mistakes",
                            "Accept that no decision is perfect"
                        ]
                    },
                    {
                        title: "Information Literacy",
                        icon: "📰",
                        items: [
                            "Check sources before believing information",
                            "Look for multiple perspectives",
                            "Distinguish opinion from fact",
                            "Be skeptical of sensational headlines",
                            "Verify before sharing",
                            "Understand media bias"
                        ]
                    },
                    {
                        title: "Problem Solving",
                        icon: "🔍",
                        items: [
                            "Define the problem clearly",
                            "Break it into smaller parts",
                            "Brainstorm multiple solutions",
                            "Try the simplest solution first",
                            "Ask for help when stuck",
                            "Learn from what doesn't work"
                        ]
                    },
                    {
                        title: "Continuous Learning",
                        icon: "📚",
                        items: [
                            "Admit when you don't know something",
                            "Ask questions without embarrassment",
                            "Read regularly",
                            "Learn from diverse sources",
                            "Practice new skills",
                            "Stay curious about the world"
                        ]
                    }
                ]
            }
        ];

        let checkedItems = {};
        let editMode = false;
        let activeTabIndex = 0;
        let currentEmojiPicker = null;
        let emojiPickerTarget = null;
let isLoadingFromFirebase = false;
        
        const firebaseConfig = {
            apiKey: "AIzaSyA5k5pOZjWTrV3b1f51-aWH2AgDUY-p5hE",
            authDomain: "life-akuk095.firebaseapp.com",
            databaseURL: "https://life-akuk095-default-rtdb.europe-west1.firebasedatabase.app",
            projectId: "life-akuk095",
            storageBucket: "life-akuk095.firebasestorage.app",
            messagingSenderId: "80383828301",
            appId: "1:80383828301:web:7c001b7375f63fc5055704"
        };
        
        firebase.initializeApp(firebaseConfig);
        const database = firebase.database();
        
        let headerData = {
            emoji: "📚",
            title: "Essential Life Skills Guide",
            subtitle: "Fundamental knowledge everyone should have to navigate life successfully"
        };
function updateSyncStatus(status) {
            const el = document.getElementById('syncStatus');
            el.className = 'sync-status';
            if (status === 'synced') {
                el.textContent = '✓ Synced';
                el.classList.add('synced');
            } else if (status === 'syncing') {
                el.textContent = '⟳ Syncing...';
                el.classList.add('syncing');
            } else {
                el.textContent = 'Connecting...';
            }
        }

        function saveToFirebase() {
            if (isLoadingFromFirebase) return;
            updateSyncStatus('syncing');
            database.ref('lifeSkills').set({
                categories,
                checkedItems,
                headerData,
                lastUpdated: Date.now()
            }).then(() => {
                updateSyncStatus('synced');
            }).catch((e) => {
                console.error('Firebase save error:', e);
            });
        }

        function loadFromFirebase() {
            isLoadingFromFirebase = true;
            updateSyncStatus('syncing');
            database.ref('lifeSkills').once('value').then((snapshot) => {
                const data = snapshot.val();
                if (data) {
                    if (data.categories) categories = data.categories;
                    if (data.checkedItems) checkedItems = data.checkedItems;
                    if (data.headerData) headerData = data.headerData;
                    renderHeader();
                    renderTabs();
                    renderContent();
                }
                updateSyncStatus('synced');
                isLoadingFromFirebase = false;
                
                database.ref('lifeSkills').on('value', (snapshot) => {
                    if (!isLoadingFromFirebase) {
                        const data = snapshot.val();
                        if (data) {
                            if (data.categories) categories = data.categories;
                            if (data.checkedItems) checkedItems = data.checkedItems;
                            if (data.headerData) headerData = data.headerData;
                            renderHeader();
                            renderTabs();
                            renderContent();
                            updateSyncStatus('synced');
                        }
                    }
                });
            }).catch((e) => {
                console.error('Firebase load error:', e);
                isLoadingFromFirebase = false;
            });
        }
        const emojiList = [
            '😀', '😃', '😄', '😁', '😅', '😂', '🤣', '😊', '😇', '🙂', '🙃', '😉', '😌', '😍', '🥰', '😘',
            '😗', '😙', '😚', '😋', '😛', '😝', '😜', '🤪', '🤨', '🧐', '🤓', '😎', '🤩', '🥳', '😏', '😒',
            '😞', '😔', '😟', '😕', '🙁', '😣', '😖', '😫', '😩', '🥺', '😢', '😭', '😤', '😠', '😡', '🤬',
            '🤯', '😳', '🥵', '🥶', '😱', '😨', '😰', '😥', '😓', '🤗', '🤔', '🤭', '🤫', '🤥', '😶', '😐',
            '😑', '😬', '🙄', '😯', '😦', '😧', '😮', '😲', '🥱', '😴', '🤤', '😪', '😵', '🤐', '🥴', '🤢',
            '💪', '👋', '🤚', '🖐️', '✋', '🖖', '👌', '🤌', '🤏', '✌️', '🤞', '🤟', '🤘', '🤙', '👈', '👉',
            '👆', '👇', '☝️', '👍', '👎', '✊', '👊', '🤛', '🤜', '👏', '🙌', '👐', '🤲', '🤝', '🙏', '✍️',
            '❤️', '🧡', '💛', '💚', '💙', '💜', '🖤', '🤍', '🤎', '💔', '❣️', '💕', '💞', '💓', '💗', '💖',
            '🏠', '🏡', '🏢', '🏣', '🏤', '🏥', '🏦', '🏨', '🏩', '🏪', '🏫', '🏬', '🏭', '🏯', '🏰', '💒',
            '🗼', '🗽', '⛪', '🕌', '🛕', '🕍', '⛩️', '🕋', '⛲', '⛺', '🌁', '🌃', '🏙️', '🌄', '🌅', '🌆',
            '🍎', '🍏', '🍊', '🍋', '🍌', '🍉', '🍇', '🍓', '🍈', '🍒', '🍑', '🥭', '🍍', '🥥', '🥝', '🍅',
            '🍆', '🥑', '🥦', '🥬', '🥒', '🌶️', '🌽', '🥕', '🧄', '🧅', '🥔', '🍠', '🥐', '🥯', '🍞', '🥖',
            '⚽', '🏀', '🏈', '⚾', '🥎', '🎾', '🏐', '🏉', '🥏', '🎱', '🪀', '🏓', '🏸', '🏒', '🏑', '🥍',
            '🏏', '🪃', '🥅', '⛳', '🪁', '🏹', '🎣', '🤿', '🥊', '🥋', '🎽', '🛹', '🛼', '🛷', '⛸️', '🥌',
            '🎯', '🪀', '🪁', '🎪', '🎨', '🎬', '🎤', '🎧', '🎼', '🎹', '🥁', '🪘', '🎷', '🎺', '🪗', '🎸',
            '🔥', '💧', '🌊', '💨', '⭐', '🌟', '✨', '⚡', '☄️', '💥', '🌈', '☀️', '🌤️', '⛅', '🌦️', '🌧️',
            '⛈️', '🌩️', '🌨️', '❄️', '☃️', '⛄', '🌬️', '💨', '🌪️', '🌫️', '🌍', '🌎', '🌏', '🌐', '🗺️', '🧭',
            '🚗', '🚕', '🚙', '🚌', '🚎', '🏎️', '🚓', '🚑', '🚒', '🚐', '🛻', '🚚', '🚛', '🚜', '🦯', '🦽',
            '🦼', '🛴', '🚲', '🛵', '🏍️', '🛺', '🚨', '🚔', '🚍', '🚘', '🚖', '🚡', '🚠', '🚟', '🚃', '🚋',
            '💻', '🖥️', '⌨️', '🖱️', '🖨️', '🖱️', '💾', '💿', '📀', '📱', '☎️', '📞', '📟', '📠', '📺', '📻',
            '⏰', '⏱️', '⏲️', '🕰️', '⌛', '⏳', '📡', '🔋', '🔌', '💡', '🔦', '🕯️', '🪔', '🧯', '🛢️', '💸',
            '📚', '📖', '📕', '📗', '📘', '📙', '📓', '📔', '📒', '📃', '📜', '📄', '📰', '🗞️', '📑', '🔖',
            '🏷️', '💰', '🪙', '💴', '💵', '💶', '💷', '💸', '💳', '🧾', '💹', '✉️', '📧', '📨', '📩', '📤',
            '🎓', '🎖️', '🏆', '🏅', '🥇', '🥈', '🥉', '⚽', '🏀', '🏈', '⚾', '🥎', '🎾', '🏐', '🏉', '🥏',
            '🔨', '🪛', '🔧', '🪚', '🔩', '⚙️', '🪤', '🧰', '🧲', '🪜', '⚗️', '🧪', '🧫', '🧬', '🔬', '🔭',
            '🧹', '🧺', '🧻', '🪣', '🧼', '🪥', '🧽', '🧴', '🛁', '🚿', '🚽', '🧷', '🪢', '🧶', '🪡', '🧵',
            '🎈', '🎉', '🎊', '🎁', '🎀', '🪅', '🪆', '🎏', '🎐', '🧧', '✨', '🎎', '🎑', '🎍', '🎋', '🎃',
            '🌍', '🌎', '🌏', '🌐', '🗺️', '🧭', '🏔️', '⛰️', '🌋', '🗻', '🏕️', '🏖️', '🏜️', '🏝️', '🏞️', '🏟️',
            '🛡️', '⚔️', '🔫', '🪃', '🏹', '🛠️', '🔪', '🗡️', '⚖️', '🔗', '⛓️', '🪝', '🧰', '🧲', '🪜', '⚙️',
            '🧠', '🫀', '🫁', '🦷', '🦴', '👀', '👁️', '👅', '👄', '💋', '🩸', '🧬', '🦠', '💊', '💉', '🩹',
            '🩺', '🌡️', '🧪', '🧫', '🧬', '🔬', '🔭', '📡', '🛰️', '🚀', '🛸', '🌌', '⭐', '🌟', '✨', '💫',
            '🧩', '🎮', '🕹️', '🎰', '🎲', '🧸', '🪅', '🪆', '🪄', '🎭', '🖼️', '🎨', '🧵', '🪡', '🧶', '🪢',
            '🔔', '🔕', '📯', '🎺', '🎷', '🪗', '🎸', '🪕', '🎻', '🪘', '🥁', '🎹', '🎼', '🎧', '🎤', '🎬'
        ];

        function showEmojiPicker(x, y, targetElement, targetType, indices) {
            hideEmojiPicker();
            
            const picker = document.createElement('div');
            picker.className = 'emoji-picker';
            picker.style.left = x + 'px';
            picker.style.top = y + 'px';
            
            const header = document.createElement('div');
header.className = 'emoji-picker-header';
header.textContent = 'Choose an emoji';
picker.appendChild(header);

// Add "Remove emoji" button
const removeBtn = document.createElement('button');
removeBtn.textContent = '× Remove emoji';
removeBtn.style.cssText = 'width: 100%; padding: 8px; margin-bottom: 10px; background: #e74c3c; color: white; border: none; border-radius: 6px; cursor: pointer; font-weight: 600;';
removeBtn.onmouseover = () => removeBtn.style.background = '#c0392b';
removeBtn.onmouseout = () => removeBtn.style.background = '#e74c3c';
removeBtn.onclick = () => selectEmoji('', targetElement, targetType, indices);
picker.appendChild(removeBtn);

const grid = document.createElement('div');
grid.className = 'emoji-grid';
            
            emojiList.forEach(emoji => {
                const option = document.createElement('div');
                option.className = 'emoji-option';
                option.textContent = emoji;
                option.onclick = () => selectEmoji(emoji, targetElement, targetType, indices);
                grid.appendChild(option);
            });
            
            picker.appendChild(grid);
            document.body.appendChild(picker);
            
            currentEmojiPicker = picker;
            emojiPickerTarget = { element: targetElement, type: targetType, indices: indices };
            
            const rect = picker.getBoundingClientRect();
            if (rect.right > window.innerWidth) {
                picker.style.left = (window.innerWidth - rect.width - 20) + 'px';
            }
            if (rect.bottom > window.innerHeight) {
                picker.style.top = (y - rect.height) + 'px';
            }
        }

        function hideEmojiPicker() {
            if (currentEmojiPicker) {
                currentEmojiPicker.remove();
                currentEmojiPicker = null;
                emojiPickerTarget = null;
            }
        }

       function selectEmoji(emoji, targetElement, targetType, indices) {
    if (targetType === 'category') {
        categories[indices.catIndex].icon = emoji;
    } else if (targetType === 'skill') {
        categories[indices.catIndex].skills[indices.skillIndex].icon = emoji;
    } else if (targetType === 'header') {
        headerData.emoji = emoji;
        saveHeaderData();
        renderHeader();
    }
    
    saveCategories();
    renderTabs();
    renderContent();
    hideEmojiPicker();
}

        document.addEventListener('click', (e) => {
            if (currentEmojiPicker && !currentEmojiPicker.contains(e.target) && !e.target.classList.contains('emoji-clickable')) {
                hideEmojiPicker();
            }
        });

        function renderHeader() {
            const headerElement = document.querySelector('.header');
            const editToggle = headerElement.querySelector('.edit-toggle');
            
            headerElement.innerHTML = '';
            headerElement.appendChild(editToggle);
            
            const h1 = document.createElement('h1');
            
            const headerEmojiSpan = document.createElement('span');
            headerEmojiSpan.className = 'header-emoji';
            headerEmojiSpan.textContent = headerData.emoji;
            if (editMode) {
                headerEmojiSpan.classList.add('emoji-clickable');
                headerEmojiSpan.onclick = (e) => {
                    e.stopPropagation();
                    const rect = e.target.getBoundingClientRect();
                    showEmojiPicker(rect.left, rect.bottom + 5, e.target, 'header', {});
                };
            }
            
            const titleSpan = document.createElement('span');
            if (editMode) titleSpan.className = 'editable';
            titleSpan.contentEditable = editMode;
            titleSpan.textContent = headerData.title;
            if (editMode) {
                titleSpan.addEventListener('blur', (e) => {
                    headerData.title = e.target.textContent.trim();
                    saveHeaderData();
                });
            }
            
            h1.appendChild(headerEmojiSpan);
            h1.appendChild(titleSpan);
            headerElement.appendChild(h1);
            
            const p = document.createElement('p');
            if (editMode) p.className = 'editable';
            p.contentEditable = editMode;
            p.textContent = headerData.subtitle;
            if (editMode) {
                p.addEventListener('blur', (e) => {
                    headerData.subtitle = e.target.textContent.trim();
                    saveHeaderData();
                });
            }
            headerElement.appendChild(p);
        }

        function renderTabs() {
            const navTabs = document.getElementById('navTabs');
            navTabs.innerHTML = '';
            
            categories.forEach((category, index) => {
                const tabWrapper = document.createElement('div');
                tabWrapper.className = 'tab-wrapper';
                
                const tab = document.createElement('button');
                tab.className = 'nav-tab' + (index === activeTabIndex ? ' active' : '');
                tab.textContent = `${category.icon} ${category.name}`;
                tab.onclick = () => switchTab(index);
                tabWrapper.appendChild(tab);
                
                if (editMode) {
                    const deleteBtn = document.createElement('button');
                    deleteBtn.className = 'delete-tab-btn';
                    deleteBtn.textContent = '×';
                    deleteBtn.onclick = (e) => {
                        e.stopPropagation();
                        deleteCategory(index);
                    };
                    tabWrapper.appendChild(deleteBtn);
                }
                
                navTabs.appendChild(tabWrapper);
            });
            
            if (editMode) {
                const addCategoryBtn = document.createElement('button');
                addCategoryBtn.className = 'nav-tab add-category-tab';
                addCategoryBtn.textContent = '+ Add Category';
                addCategoryBtn.onclick = addCategory;
                navTabs.appendChild(addCategoryBtn);
            }
        }

        function renderContent() {
            const contentArea = document.getElementById('contentArea');
            contentArea.innerHTML = '';

            categories.forEach((category, catIndex) => {
                const categoryDiv = document.createElement('div');
                categoryDiv.className = 'category' + (catIndex === activeTabIndex ? ' active' : '');

                const intro = document.createElement('div');
                intro.className = 'category-intro';
                
                const categoryIconSpan = document.createElement('span');
                categoryIconSpan.textContent = category.icon;
                if (editMode) {
                    categoryIconSpan.className = 'emoji-clickable';
                    categoryIconSpan.onclick = (e) => {
                        e.stopPropagation();
                        const rect = e.target.getBoundingClientRect();
                        showEmojiPicker(rect.left, rect.bottom + 5, e.target, 'category', { catIndex });
                    };
                }
                
                const h2 = document.createElement('h2');
                if (editMode) h2.className = 'editable';
                h2.contentEditable = editMode;
                h2.setAttribute('data-cat', catIndex);
                h2.setAttribute('data-field', 'name');
                h2.appendChild(categoryIconSpan);
                h2.appendChild(document.createTextNode(' ' + category.name));
                
                const p = document.createElement('p');
                if (editMode) p.className = 'editable';
                p.contentEditable = editMode;
                p.setAttribute('data-cat', catIndex);
                p.setAttribute('data-field', 'intro');
                p.textContent = category.intro;
                
                intro.appendChild(h2);
                intro.appendChild(p);
                
                if (editMode) {
                    h2.addEventListener('blur', (e) => {
                        const textContent = e.target.textContent.trim();
                        const nameWithoutIcon = textContent.replace(/^[\u{1F300}-\u{1F9FF}]\s*/u, '');
                        categories[catIndex].name = nameWithoutIcon;
                        saveCategories();
                    });
                    p.addEventListener('blur', (e) => saveEdit(e, catIndex, 'intro'));
                }
                
                categoryDiv.appendChild(intro);

                const skillGrid = document.createElement('div');
                skillGrid.className = 'skill-grid';

                category.skills.forEach((skill, skillIndex) => {
                    const skillCard = document.createElement('div');
                    skillCard.className = 'skill-card';

                    const cardHeader = document.createElement('div');
                    cardHeader.className = 'skill-card-header';
                    
                    const title = document.createElement('div');
                    title.className = 'skill-title';
                    title.style.marginBottom = '0';
                    
                    const skillIconSpan = document.createElement('span');
                    skillIconSpan.className = 'skill-icon';
                    skillIconSpan.textContent = skill.icon;
                    if (editMode) {
                        skillIconSpan.classList.add('emoji-clickable');
                        skillIconSpan.onclick = (e) => {
                            e.stopPropagation();
                            const rect = e.target.getBoundingClientRect();
                            showEmojiPicker(rect.left, rect.bottom + 5, e.target, 'skill', { catIndex, skillIndex });
                        };
                    }
                    
                    const titleTextSpan = document.createElement('span');
                    if (editMode) titleTextSpan.className = 'editable';
                    titleTextSpan.contentEditable = editMode;
                    titleTextSpan.setAttribute('data-cat', catIndex);
                    titleTextSpan.setAttribute('data-skill', skillIndex);
                    titleTextSpan.setAttribute('data-field', 'title');
                    titleTextSpan.textContent = skill.title;
                    
                    title.appendChild(skillIconSpan);
                    title.appendChild(titleTextSpan);
                    cardHeader.appendChild(title);
                    
                    if (editMode) {
                        const deleteSkillBtn = document.createElement('button');
                        deleteSkillBtn.className = 'delete-skill-btn';
                        deleteSkillBtn.textContent = '×';
                        deleteSkillBtn.onclick = () => deleteSkill(catIndex, skillIndex);
                        cardHeader.appendChild(deleteSkillBtn);
                        
                        titleTextSpan.addEventListener('blur', (e) => saveSkillEdit(e, catIndex, skillIndex, 'title'));
                    }
                    
                    skillCard.appendChild(cardHeader);

                    skill.items.forEach((item, itemIndex) => {
                        const checklistItem = document.createElement('div');
                        const itemId = `${catIndex}-${skillIndex}-${itemIndex}`;
                        checklistItem.className = 'checklist-item' + (checkedItems[itemId] ? ' checked' : '');
                        
                        if (!editMode) {
                            checklistItem.onclick = () => toggleCheck(itemId);
                        }
                        
                        const deleteBtn = editMode ? `<button class="delete-item-btn" onclick="deleteItem(${catIndex}, ${skillIndex}, ${itemIndex})">×</button>` : '';
                        
                        checklistItem.innerHTML = `
                            <div class="checkbox"></div>
                            <div class="checklist-text ${editMode ? 'editable' : ''}" contenteditable="${editMode}" data-cat="${catIndex}" data-skill="${skillIndex}" data-item="${itemIndex}">${item}</div>
                            ${deleteBtn}
                        `;
                        
                        if (editMode) {
                            const textDiv = checklistItem.querySelector('.checklist-text');
                            textDiv.addEventListener('blur', (e) => saveItemEdit(e, catIndex, skillIndex, itemIndex));
                        }
                        
                        skillCard.appendChild(checklistItem);
                    });
                    
                    if (editMode) {
                        const addBtn = document.createElement('button');
                        addBtn.className = 'add-item-btn';
                        addBtn.textContent = '+ Add Item';
                        addBtn.onclick = () => addItem(catIndex, skillIndex);
                        skillCard.appendChild(addBtn);
                    }

                    skillGrid.appendChild(skillCard);
                });

                categoryDiv.appendChild(skillGrid);

                if (editMode) {
                    const addSkillBtn = document.createElement('button');
                    addSkillBtn.className = 'add-skill-btn';
                    addSkillBtn.textContent = '+ Add New Card';
                    addSkillBtn.onclick = () => addSkill(catIndex);
                    categoryDiv.appendChild(addSkillBtn);
                }

                contentArea.appendChild(categoryDiv);
            });
        }

        function switchTab(index) {
            if (typeof index !== 'number') return;
            if (index < 0) index = 0;
            if (index >= categories.length) index = categories.length - 1;
            activeTabIndex = index;

            const tabs = document.querySelectorAll('.nav-tab');
            const categoryDivs = document.querySelectorAll('.category');

            tabs.forEach((tab, i) => {
                tab.classList.toggle('active', i === activeTabIndex);
            });

            categoryDivs.forEach((cat, i) => {
                cat.classList.toggle('active', i === activeTabIndex);
            });
        }

       function toggleCheck(itemId) {
    if (editMode) return;
    checkedItems[itemId] = !checkedItems[itemId];
    saveToFirebase();
    renderContent();
}

        function toggleEditMode() {
            editMode = !editMode;
            const btn = document.getElementById('editModeBtn');
            const contentArea = document.getElementById('contentArea');
            
            if (editMode) {
                btn.textContent = 'Done';
                btn.classList.add('active');
                contentArea.classList.add('edit-mode');
            } else {
                btn.textContent = 'Edit';
                btn.classList.remove('active');
                contentArea.classList.remove('edit-mode');
                saveCategories();
                saveHeaderData();
                hideEmojiPicker();
            }
            
            renderHeader();
            renderTabs();
            renderContent();
        }

        function saveEdit(e, catIndex, field) {
            const newValue = e.target.textContent.trim();
            if (field === 'name') {
                const nameWithoutIcon = newValue.replace(/^[\u{1F300}-\u{1F9FF}]\s*/u, '');
                categories[catIndex].name = nameWithoutIcon;
            } else {
                categories[catIndex][field] = newValue;
            }
            saveCategories();
        }

        function saveSkillEdit(e, catIndex, skillIndex, field) {
            const newValue = e.target.textContent.trim();
            categories[catIndex].skills[skillIndex][field] = newValue;
            saveCategories();
        }

        function saveItemEdit(e, catIndex, skillIndex, itemIndex) {
            const newValue = e.target.textContent.trim();
            categories[catIndex].skills[skillIndex].items[itemIndex] = newValue;
            saveCategories();
        }

        function addItem(catIndex, skillIndex) {
            categories[catIndex].skills[skillIndex].items.push('New item - click to edit');
            saveCategories();
            renderContent();
        }

        function deleteItem(catIndex, skillIndex, itemIndex) {
            if (confirm('Are you sure you want to delete this item?')) {
                categories[catIndex].skills[skillIndex].items.splice(itemIndex, 1);
                saveCategories();
                renderContent();
            }
        }

        function addSkill(catIndex) {
            categories[catIndex].skills.push({
                title: "New Skill",
                icon: "✨",
                items: ["New item - click to edit"]
            });
            saveCategories();
            renderContent();
        }

        function deleteSkill(catIndex, skillIndex) {
            if (confirm('Are you sure you want to delete this skill card?')) {
                categories[catIndex].skills.splice(skillIndex, 1);
                saveCategories();
                renderContent();
            }
        }

        function addCategory() {
            categories.push({
                name: "New Category",
                icon: "📌",
                intro: "Click to edit this description",
                skills: []
            });
            saveCategories();
            renderTabs();
            renderContent();
            switchTab(categories.length - 1);
        }

        function deleteCategory(catIndex) {
            if (confirm('Are you sure you want to delete this entire category and all its skills?')) {
                categories.splice(catIndex, 1);
                if (activeTabIndex >= categories.length) {
                    activeTabIndex = Math.max(0, categories.length - 1);
                }
                saveCategories();
                renderTabs();
                renderContent();
                switchTab(activeTabIndex);
            }
        }

        function saveCategories() {
    saveToFirebase();
}

        function saveHeaderData() {
    saveToFirebase();
}

       
       // Load any existing local data first for immediate display
const savedChecklist = localStorage.getItem('lifeSkillsChecklist');
if (savedChecklist) {
    try {
        checkedItems = JSON.parse(savedChecklist);
    } catch (e) {
        console.error('Error loading checklist:', e);
    }
}

// Render immediately with default data
renderHeader();
renderTabs();
renderContent();

// Then load from Firebase (will update when ready)
loadFromFirebase();
    </script>
<script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-database-compat.js"></script>
</body>
</html>