<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Essential Life Skills Guide</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; background: linear-gradient(135deg, #2c3e50 0%, #3498db 100%); min-height: 100vh; padding: 20px; }
        .container { max-width: 1200px; margin: 0 auto; background: white; border-radius: 16px; box-shadow: 0 20px 60px rgba(0,0,0,0.3); overflow: hidden; }
        .header { background: linear-gradient(135deg, #2c3e50 0%, #3498db 100%); color: white; padding: 40px 30px; text-align: center; position: relative; }
        .header h1 { font-size: 32px; margin-bottom: 10px; }
        .header p { opacity: 0.9; font-size: 16px; }
       .header .editable:focus {  outline: 2px solid #fff;    background: rgba(255, 255, 255, 0.2);   color: #fff; }
        .header .undo-redo-btns { position: absolute; top: 20px; left: 30px; display: flex; gap: 8px;}
.header .undo-redo-btns button { padding: 6px 12px; font-size: 14px; border-radius: 6px; border: none; cursor: pointer; background: #3498db; color: white; font-weight: bold; transition: all 0.2s ease;}
.header .undo-redo-btns button:hover { background: #2980b9;}
        .edit-toggle { position: absolute; top: 20px; right: 30px; }
        .edit-btn { background: rgba(255,255,255,0.2); color: white; border: 2px solid white; padding: 8px 16px; border-radius: 6px; cursor: pointer; font-size: 14px; font-weight: 600; transition: all 0.3s ease; }
        .edit-btn:hover { background: white; color: #3498db; }
        .edit-btn.active { background: #27ae60; border-color: #27ae60; }
        .nav-tabs { display: flex; background: #f8f9fa; border-bottom: 2px solid #dee2e6; overflow-x: auto; flex-wrap: wrap; }
        .tab-wrapper { display: flex; align-items: center; gap: 5px; }
        .nav-tab { padding: 15px 25px; cursor: pointer; border: none; background: none; font-size: 15px; font-weight: 500; color: #6c757d; transition: all 0.3s ease; white-space: nowrap; border-bottom: 3px solid transparent; }
        .nav-tab:hover { background: #e9ecef; color: #495057; }
        .nav-tab.active { color: #3498db; border-bottom-color: #3498db; background: white; }
        .emoji-picker { position: absolute; background: white; border: 1px solid #ccc; border-radius: 8px; padding: 8px; display: grid; grid-template-columns: repeat(auto-fill, 30px); gap: 5px; box-shadow: 0 4px 12px rgba(0,0,0,0.15); z-index: 1000;}
        .emoji-picker button { font-size: 20px; background: none;  border: none; cursor: pointer;  transition: transform 0.2s;}
        .emoji-picker button:hover { transform: scale(1.2);}
        .delete-tab-btn { width: 18px; height: 18px; border-radius: 50%; background: #e74c3c; color: white; border: none; cursor: pointer; font-size: 11px; font-weight: bold; align-items: center; justify-content: center; margin-right: 10px; flex-shrink: 0; transition: all 0.2s ease; line-height: 1; padding: 0; }
        .delete-tab-btn:hover { background: #c0392b; transform: scale(1.1); }
        .add-category-tab { background: #27ae60 !important; color: white !important; font-weight: bold; border-bottom: none !important; padding: 15px 20px !important; font-size: 18px !important; }
        .add-category-tab:hover { background: #229954 !important; }
        .content-area { padding: 30px; }
        .category { display: none; }
        .category.active { display: block; }
        .skill-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 20px; margin-top: 20px; }
        .skill-card { background: #f8f9fa; border-radius: 12px; padding: 20px; border-left: 4px solid #3498db; transition: all 0.3s ease; }
        .skill-card:hover { transform: translateY(-2px); box-shadow: 0 4px 12px rgba(0,0,0,0.1); }
        .skill-title { font-size: 18px; font-weight: 600; color: #2c3e50; margin-bottom: 12px; }
        .category-intro { background: #e3f2fd; padding: 20px; border-radius: 8px; margin-bottom: 25px; border-left: 4px solid #2196f3; }
        .category-intro h2 { color: #1976d2; margin-bottom: 10px; font-size: 20px; }
        .checklist-item { display: flex; align-items: flex-start; gap: 12px; padding: 12px; background: white; margin-bottom: 10px; border-radius: 8px; cursor: pointer; transition: all 0.3s ease; }
        .checklist-item:hover { background: #f0f7ff; }
        .checkbox { width: 20px; height: 20px; border: 2px solid #3498db; border-radius: 4px; flex-shrink: 0; margin-top: 2px; cursor: pointer; transition: all 0.3s ease; }
        .checklist-item.checked .checkbox { background: #27ae60; border-color: #27ae60; position: relative; }
        .checklist-item.checked .checkbox:after { content: "✓"; color: white; position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); font-size: 14px; font-weight: bold; }
        .checklist-item.checked { opacity: 0.7; }
        .checklist-text { flex: 1; font-size: 14px; line-height: 1.5; color: #495057; }
        .editable { cursor: text; padding: 2px 4px; border-radius: 4px; transition: all 0.2s ease; }
        .editable:hover { background: rgba(52, 152, 219, 0.1); }
        .editable:focus { outline: 2px solid #3498db; background: white; }
        .delete-btn { width: 18px; height: 18px; border-radius: 50%; background: #e74c3c; color: white; border: none; cursor: pointer; font-size: 11px; font-weight: bold; display: none; align-items: center; justify-content: center; margin-left: 8px; flex-shrink: 0; transition: all 0.2s ease; line-height: 1; padding: 0; }
        .delete-btn:hover { background: #c0392b; transform: scale(1.1); }
        .edit-mode .delete-btn { display: inline-flex; }
        .add-item-btn { background: #27ae60; color: white; border: none; padding: 10px 20px; border-radius: 6px; cursor: pointer; margin-top: 10px; font-size: 14px; font-weight: 600; display: none; width: 100%; }
        .add-item-btn:hover { background: #229954; }
        .edit-mode .add-item-btn { display: block; }
        .add-skill-btn { background: #3498db; color: white; padding: 12px 20px; border: none; border-radius: 8px; cursor: pointer; font-size: 14px; font-weight: 600; width: 100%; margin-top: 20px; transition: all 0.3s ease; display: none; }
        .add-skill-btn:hover { background: #2980b9; }
        .edit-mode .add-skill-btn { display: block; }
        @media (max-width: 768px) { .skill-grid { grid-template-columns: 1fr; } }
    </style>
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-database-compat.js"></script>
</head>
<body>
    <div class="container">
        <div class="header">
            <div class="edit-toggle"><button class="edit-btn" id="editModeBtn" onclick="toggleEditMode()">Edit</button></div>
            <h1 id="mainTitle">📚 Essential Life Skills Guide</h1>
            <p id="mainSubtitle">Fundamental knowledge everyone should have to navigate life successfully</p>
        </div>
        <div class="nav-tabs" id="navTabs"></div>
        <div class="content-area" id="contentArea"></div>
    </div>
    <script>
// Initialize Firebase - REPLACE WITH YOUR CONFIG
const firebaseConfig = {
  apiKey: "AIzaSyA5k5pOZjWTrV3b1f51-aWH2AgDUY-p5hE",
  authDomain: "life-akuk095.firebaseapp.com",
  databaseURL: "https://life-akuk095-default-rtdb.europe-west1.firebasedatabase.app",
  projectId: "life-akuk095",
  storageBucket: "life-akuk095.firebasestorage.app",
  messagingSenderId: "80383828301",
  appId: "1:80383828301:web:7c001b7375f63fc5055704",
};

// Initialize Firebase
firebase.initializeApp(firebaseConfig);
const database = firebase.database();

// Default data structure
let categories = [
    {
        name: "Health & Body", 
        icon: "💪", 
        intro: "Understanding your body and maintaining your health.", 
        skills: [
            {
                title: "Basic Hygiene", 
                icon: "🧼", 
                items: ["Brush teeth twice daily", "Shower regularly", "Wash hands before eating"]
            }
        ]
    },
    {
        name: "Daily Living", 
        icon: "🏡", 
        intro: "Practical skills to manage your home and everyday responsibilities.", 
        skills: [
            {
                title: "Household Basics", 
                icon: "🧹", 
                items: ["Do laundry", "Clean regularly", "Take out trash"]
            }
        ]
    }
];

let checkedItems = {};
let editMode = false;
let activeTabIndex = 0;
// Default app title and subtitle
let appIcon = "📚"; // default icon
let appTitle = "Essential Life Skills Guide";
let appSubtitle = "Fundamental knowledge everyone should have to navigate life successfully";

// Load data from Firebase on startup
function loadFromFirebase() {
    database.ref('categories').once('value', (snapshot) => {
        const data = snapshot.val();
        if (data) {
            categories = data;
        }
        renderTabs();
        renderContent();
    });
    
    database.ref('checkedItems').once('value', (snapshot) => {
        const data = snapshot.val();
        if (data) {
            checkedItems = data;
            renderContent();
        }
    });

    database.ref('appTitle').once('value', (snapshot) => {
        if (snapshot.val()) appTitle = snapshot.val();
        renderHeader();
    });

    database.ref('appSubtitle').once('value', (snapshot) => {
        if (snapshot.val()) appSubtitle = snapshot.val();
        renderHeader();
    });
    
    database.ref('appIcon').once('value', (snapshot) => {
    if (snapshot.val() !== null) appIcon = snapshot.val();
    renderHeader();
});
}

// Save title + subtitle to Firebase
function saveHeader() {
    database.ref('appTitle').set(appTitle);
    database.ref('appSubtitle').set(appSubtitle);
    database.ref('appIcon').set(appIcon);
}

function renderHeader() {
    const header = document.querySelector('.header');
    header.innerHTML = `
        <div class="edit-toggle">
            <button class="edit-btn" id="editModeBtn" onclick="toggleEditMode()">
                ${editMode ? 'Done' : 'Edit'}
            </button>
        </div>
        <h1>
            <span class="icon editable-icon" ${editMode ? 'onclick="editAppIcon(this)"' : ''}>
                ${appIcon && appIcon !== "" ? appIcon : (editMode ? "🚫" : "")}
            </span>
            <span class="${editMode ? 'editable' : ''}" contenteditable="${editMode}">
                ${appTitle}
            </span>
        </h1>
        <p class="${editMode ? 'editable' : ''}" contenteditable="${editMode}">${appSubtitle}</p>
    `;

    if (editMode) {
        header.querySelector('h1 span.editable').addEventListener('blur', (e) => {
            saveState(); 
            appTitle = e.target.textContent.trim();
            saveHeader();
        });
        header.querySelector('p').addEventListener('blur', (e) => {
            saveState(); 
            appSubtitle = e.target.textContent.trim();
            saveHeader();
        });
    }
    renderUndoRedoButtons();
}

function renderUndoRedoButtons() {
    // Remove existing buttons
    const existing = document.querySelector('.header .undo-redo-btns');
    if (existing) existing.remove();

    if (!editMode) return; // only show in edit mode

    const container = document.createElement('div');
    container.className = 'undo-redo-btns';

    const undoBtn = document.createElement('button');
    undoBtn.textContent = 'Undo';
    undoBtn.onclick = undo;

    const redoBtn = document.createElement('button');
    redoBtn.textContent = 'Redo';
    redoBtn.onclick = redo;

    container.appendChild(undoBtn);
    container.appendChild(redoBtn);

    document.querySelector('.header').appendChild(container);
}

function showEmojiPicker(target, callback) {
    // Remove any existing picker
    const oldPicker = document.querySelector('.emoji-picker');
    if (oldPicker) oldPicker.remove();

    const picker = document.createElement('div');
    picker.className = 'emoji-picker';

    const emojis = ["📚","💪","🏡","🧼","🧹","✨","⚡","🔥","💡","📌","🚫"];
    
    emojis.forEach(e => {
        const btn = document.createElement('button');
        btn.textContent = e;
        btn.onclick = () => {
            saveState();
            callback(e === "🚫" ? "" : e); // 🚫 means no icon
            picker.remove();
        };
        picker.appendChild(btn);
    });

    document.body.appendChild(picker);

    // Position near target
    const rect = target.getBoundingClientRect();
    picker.style.top = `${rect.bottom + window.scrollY + 5}px`;
    picker.style.left = `${rect.left + window.scrollX}px`;
}
function editAppIcon(el) {
    if (!editMode) return;
    showEmojiPicker(el, (emoji) => {
        saveState();
        appIcon = emoji; // Simply set the icon (empty string if 🚫 was selected)
        saveHeader();
        renderHeader();
    });
}
// Save categories to Firebase
function saveCategories() {
    database.ref('categories').set(categories);
}

// Save checked items to Firebase
function saveCheckedItems() {
    database.ref('checkedItems').set(checkedItems);
}

function renderTabs() { 
    const navTabs = document.getElementById('navTabs'); 
    navTabs.innerHTML = ''; 
    
    categories.forEach((cat, i) => { 
        const tabWrapper = document.createElement('div');
        tabWrapper.className = 'tab-wrapper';
        
        const tab = document.createElement('button'); 
        tab.className = 'nav-tab' + (i === activeTabIndex ? ' active' : ''); 
        tab.textContent = `${cat.icon} ${cat.name}`; 
        tab.onclick = () => switchTab(i); 
        tabWrapper.appendChild(tab);
        
        if (editMode) {
            const deleteBtn = document.createElement('button');
            deleteBtn.className = 'delete-tab-btn';
            deleteBtn.textContent = '×';
            deleteBtn.onclick = (e) => {
                e.stopPropagation();
                deleteCategory(i);
            };
            tabWrapper.appendChild(deleteBtn);
        }
        
        navTabs.appendChild(tabWrapper); 
    }); 
    
    if (editMode) {
        const addCategoryBtn = document.createElement('button');
        addCategoryBtn.className = 'nav-tab add-category-tab';
        addCategoryBtn.textContent = '+';
        addCategoryBtn.onclick = addCategory;
        navTabs.appendChild(addCategoryBtn);
    }
}

function renderContent() { 
    const contentArea = document.getElementById('contentArea'); 
    contentArea.innerHTML = ''; 
    contentArea.className = 'content-area' + (editMode ? ' edit-mode' : ''); 
    
    categories.forEach((cat, catIndex) => { 
        const catDiv = document.createElement('div'); 
        catDiv.className = 'category' + (catIndex === activeTabIndex ? ' active' : ''); 
        
        const intro = document.createElement('div'); 
        intro.className = 'category-intro'; 
        const h2 = document.createElement('h2'); 
        h2.innerHTML = `
   <span class="icon editable-icon" ${editMode ? `onclick="editCategoryIcon(${catIndex}, this)"` : ''}>${cat.icon || ""}</span>
   <span class="${editMode ? 'editable' : ''}" contenteditable="${editMode}">${cat.name}</span>
`;

        const p = document.createElement('p'); 
        p.className = editMode ? 'editable' : ''; 
        p.contentEditable = editMode; 
        p.textContent = cat.intro; 
        intro.appendChild(h2); 
        intro.appendChild(p); 
        
        if (editMode) { 
            h2.querySelector('.editable').addEventListener('blur', (e) => { 
                saveState();
                categories[catIndex].name = e.target.textContent.trim();  
                saveCategories();
                renderTabs();
            }); 
            p.addEventListener('blur', (e) => { 
                saveState();
                categories[catIndex].intro = e.target.textContent.trim();  
                saveCategories();
            }); 
        } 
        
        catDiv.appendChild(intro); 
        
        const grid = document.createElement('div'); 
        grid.className = 'skill-grid'; 
        
        cat.skills.forEach((skill, skillIndex) => { 
            const card = document.createElement('div'); 
            card.className = 'skill-card'; 
            
            const titleDiv = document.createElement('div'); 
            titleDiv.className = 'skill-title'; 
           titleDiv.innerHTML = `
   <span class="icon editable-icon" ${editMode ? `onclick="editSkillIcon(${catIndex}, ${skillIndex}, this)"` : ''}>${skill.icon || ""}</span>
   <span class="${editMode ? 'editable' : ''}" contenteditable="${editMode}">${skill.title}</span>
`;

            
            if (editMode) { 
                const deleteSkillBtn = document.createElement('button');
                deleteSkillBtn.className = 'delete-btn';
                deleteSkillBtn.textContent = '×';
                deleteSkillBtn.onclick = () => deleteSkill(catIndex, skillIndex);
                titleDiv.appendChild(deleteSkillBtn);
                
                titleDiv.querySelector('.editable').addEventListener('blur', (e) => { 
                    saveState();
                    categories[catIndex].skills[skillIndex].title = e.target.textContent.trim();  
                    saveCategories();
                }); 
            } 
            
            card.appendChild(titleDiv); 
            
            skill.items.forEach((item, itemIndex) => { 
                const itemId = `${catIndex}-${skillIndex}-${itemIndex}`; 
                const checkItem = document.createElement('div'); 
                checkItem.className = 'checklist-item' + (checkedItems[itemId] ? ' checked' : ''); 
                if (!editMode) checkItem.onclick = () => toggleCheck(itemId); 
                
                const checkbox = document.createElement('div');
                checkbox.className = 'checkbox';
                checkItem.appendChild(checkbox);
                
                const textDiv = document.createElement('div');
                textDiv.className = 'checklist-text' + (editMode ? ' editable' : '');
                textDiv.contentEditable = editMode;
                textDiv.textContent = item;
                checkItem.appendChild(textDiv);
                
                if (editMode) {
                    const deleteItemBtn = document.createElement('button');
                    deleteItemBtn.className = 'delete-btn';
                    deleteItemBtn.textContent = '×';
                    deleteItemBtn.onclick = () => deleteItem(catIndex, skillIndex, itemIndex);
                    checkItem.appendChild(deleteItemBtn);
                    
                    textDiv.addEventListener('blur', (e) => { 
                        saveState(); 
                        categories[catIndex].skills[skillIndex].items[itemIndex] = e.target.textContent.trim(); 
                        saveCategories();
                    }); 
                }
                
                card.appendChild(checkItem); 
            }); 
            
            const addItemBtn = document.createElement('button'); 
            addItemBtn.className = 'add-item-btn'; 
            addItemBtn.textContent = '+ Add Item'; 
            addItemBtn.onclick = () => addItem(catIndex, skillIndex); 
            card.appendChild(addItemBtn); 
            
            grid.appendChild(card); 
        }); 
        
        catDiv.appendChild(grid); 
        
        const addSkillBtn = document.createElement('button'); 
        addSkillBtn.className = 'add-skill-btn'; 
        addSkillBtn.textContent = '+ Add New Card'; 
        addSkillBtn.onclick = () => addSkill(catIndex); 
        catDiv.appendChild(addSkillBtn); 
        
        contentArea.appendChild(catDiv); 
    }); 
}

function switchTab(index) { 
    activeTabIndex = index; 
    renderTabs();
    const cats = document.querySelectorAll('.category'); 
    cats.forEach((cat, i) => cat.classList.toggle('active', i === activeTabIndex)); 
}

function toggleCheck(itemId) { 
    if (editMode) return; 
    saveState(); 
    checkedItems[itemId] = !checkedItems[itemId]; 
    saveCheckedItems();
    renderContent(); 
}

function toggleEditMode() { 
    editMode = !editMode; 
    const btn = document.getElementById('editModeBtn'); 
    btn.textContent = editMode ? 'Done' : 'Edit'; 
    btn.classList.toggle('active', editMode); 
    renderHeader();
    renderTabs();
    renderContent(); 
    renderUndoRedoButtons(); 
}
function editSkillIcon(catIndex, skillIndex, el) {
    showEmojiPicker(el, (emoji) => {
        saveState();
        categories[catIndex].skills[skillIndex].icon = emoji;
        saveCategories();
        renderContent();
    });
}

function editCategoryIcon(catIndex, el) {
    showEmojiPicker(el, (emoji) => {
        saveState(); 
        categories[catIndex].icon = emoji;
        saveCategories();
        renderTabs();
        renderContent();
    });
}
function addSkill(catIndex) { 
    saveState();
    categories[catIndex].skills.push({ 
        title: "New Skill", 
        icon: "✨", 
        items: ["New item - click to edit"] 
    }); 
    saveCategories();
    renderContent(); 
}

function deleteSkill(catIndex, skillIndex) { 
    if (confirm('Delete this skill?')) { 
        saveState();
        categories[catIndex].skills.splice(skillIndex, 1);  
        saveCategories();
        renderContent(); 
    } 
}

function deleteItem(catIndex, skillIndex, itemIndex) { 
    saveState();
    categories[catIndex].skills[skillIndex].items.splice(itemIndex, 1);  
    saveCategories();
    renderContent(); 
}

function addItem(catIndex, skillIndex) { 
    saveState();
    categories[catIndex].skills[skillIndex].items.push("New item");  
    saveCategories();
    renderContent(); 
}

function addCategory() {
    saveState();
    categories.push({
        name: "New Category",
        icon: "📌",
        intro: "Click to edit this description",
        skills: []
    });
    activeTabIndex = categories.length - 1;
    saveCategories();
    renderTabs();
    renderContent();
}

function deleteCategory(catIndex) {
    if (confirm('Delete this entire category?')) {
        saveState(); 
        categories.splice(catIndex, 1);
        if (activeTabIndex >= categories.length) {
            activeTabIndex = Math.max(0, categories.length - 1);
        }
        saveCategories();
        renderTabs();
        renderContent();
    }
}

// Load data when page loads
loadFromFirebase();
    </script>
</body>
</html>










